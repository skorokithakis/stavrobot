provider = "anthropic"
model = "claude-sonnet-4-20250514"

# Password for HTTP Basic Auth. All endpoints except webhooks require this.
# Change this to something secure. If removed or commented out, all endpoints
# are open to the world.
password = "change-me"

# Authentication: use exactly one of apiKey or authFile.
# apiKey: a static Anthropic API key.
# authFile: path to an auth.json with OAuth credentials (for Claude Pro/Max
#   subscriptions). Generate it by running `npx @mariozechner/pi-coding-agent`,
#   then using the /login command and choosing "Anthropic".
# apiKey = "your-api-key-here"
authFile = "/app/data/auth.json"


# The public HTTPS URL where this server is reachable (no trailing slash).
# Required when authFile is set. Also used to register the Telegram webhook.
publicHostname = "https://example.com"

# The system prompt is injected at the start of every conversation. Customize
# it to change the agent's personality, capabilities, and behavior.
systemPrompt = """
You are a helpful personal assistant. You have access to a PostgreSQL
database where you can store and retrieve any information. Use the
execute_sql tool to interact with the database.

Every message you receive includes a structured header with Time, Source, Sender, and
Text fields. When the Source field is "signal", use the send_signal_message tool to
reply to the number in the Sender field — do not rely on the text response alone. When
the Source field is "telegram", use the send_telegram_message tool to reply to the chat
ID in the Sender field — do not rely on the text response alone. When the Source field
is "cli", respond normally via text. Unless instructed otherwise by the user, respond on
the same channel that the message arrived on.

You can use text_to_speech to generate a voice note and pass the resulting file path as
an attachment to send_signal_message, but only do this if the user explicitly asks for a
voice note or it clearly makes sense in context.

You have access to a custom tools system. Use list_tools to discover available tools,
show_tool to inspect a tool's parameters, and run_tool to execute one. If you need
a tool that doesn't exist, use request_coding_task to ask the coding agent to create it
— describe clearly what the tool should do, what parameters it should accept, and what
it should return. The coding agent's response will arrive as a separate message with
Source: coder.

Markdown formatting is supported, you should use it.
"""

# The PostgreSQL database the agent uses for persistent storage. The defaults
# here match the docker-compose setup and work out of the box.
[postgres]
host = "postgres"
port = 5432
database = "stavrobot"
user = "stavrobot"
password = "stavrobot"

# Signal integration. account is the phone number registered with signal-cli.
# allowedNumbers is the allowlist of numbers permitted to message the agent.
[signal]
account = "+1234567890"
allowedNumbers = ["+1234567890"]

# Telegram integration. Create a bot via @BotFather on Telegram to get a token.
# To find your chat ID, message @userinfobot on Telegram.
# The webhook is registered at <publicHostname>/telegram/webhook on startup.
# publicHostname (top-level) must be set when using Telegram.
[telegram]
botToken = "123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"
allowedChatIds = [123456789]

# Text-to-speech configuration. Used by the text_to_speech tool.
[tts]
provider = "openai"
apiKey = "your-openai-api-key-here"
model = "tts-1"
voice = "alloy"

# Speech-to-text configuration. Used to transcribe voice notes from Signal and Telegram.
[stt]
provider = "openai"
apiKey = "your-openai-api-key-here"
model = "gpt-4o-transcribe"

# Optional. Enables the web_search tool. Uses a separate API key and model for
# sub-agent search calls. Uncomment to activate.
# [webSearch]
# apiKey = "your-anthropic-api-key-here"
# model = "claude-haiku-4-20250514"

# Optional. Enables the web_fetch tool. Same pattern as webSearch. Uncomment to activate.
# [webFetch]
# apiKey = "your-anthropic-api-key-here"
# model = "claude-haiku-4-20250514"

# Enables the self-programming coder agent. The model here can differ from the
# main model above, allowing a different model to handle coding tasks.
[coder]
model = "claude-sonnet-4-6"
